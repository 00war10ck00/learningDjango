<!DOCTYPE html>
<html lang="en">


<!-- Mirrored from d-themes.com/html/donald/cart.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 12 Mar 2021 07:24:02 GMT -->
<head>
    {% load static %}
    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">

    <title>Donald - Bootstrap eCommerce Template</title>

    <meta name="keywords" content="HTML5 Template"/>
    <meta name="description" content="Donald - Bootstrap eCommerce Template">
    <meta name="author" content="D-THEMES">

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="{% static 'templatecss/images/icons/favicon.png' %}">


    <link rel="stylesheet" type="text/css" href="{% static 'templatecss/vendor/fontawesome-free/css/all.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'templatecss/vendor/animate/animate.min.css' %}">

    <!-- Plugins CSS File -->
    <link rel="stylesheet" type="text/css"
          href="{% static 'templatecss/vendor/magnific-popup/magnific-popup.min.css' %}">

    <!-- Main CSS File -->
    <link rel="stylesheet" type="text/css" href="{% static 'templatecss/css/style.min.css' %}">
    <script>  function getTable() {
        {#alert('Hello')#}
        var xhttp = new XMLHttpRequest();
        {#console.log('success')#}
        xhttp.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                var output = JSON.parse(this.response);
                console.log(output)
                var data = output['data'];
                if (data.length > 0) {
                    createTable(data)
                } else {
                    createTable(data)
                    d = `
                    <div class="alert alert-warning alert-dismissible fade show" role="alert">
                             <strong>Empty</strong> You should check in on some of those products.
                                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                 </button>
                    </div>`
                    document.getElementById('msg').innerHTML = d;
                }

                document.getElementById('grand_total').innerHTML = '$ ' + output['grand_total']
                document.getElementById('grand_total1').innerHTML = '$ ' + output['grand_total']


            }
            if (output['grand_total'] == 0)
                {
                    alert('Your cart is empty / Now you will be directed to Dashboard');
                    location.href = 'dashboard';
                }
        };
        xhttp.open("GET", "cartajax", true);
        xhttp.send();
    }</script>

</head>

<body>

<div class="loading-overlay">
    <div class="bounce-loader">
        <div class="bounce1"></div>
        <div class="bounce2"></div>
        <div class="bounce3"></div>
        <div class="bounce4"></div>
    </div>
</div>
{% include 'navbar.html' %}
{% include 'alert.html' %}
<!-- End Header -->
<main class="main cart">
    <div class="page-content pt-10 pb-10">
        <div class="step-by pt-2 pb-2 pr-4 pl-4">
            <h3 class="title title-simple title-step active"><a href="cart.html">1. Shopping Cart</a></h3>
            <h3 class="title title-simple title-step"><a href="checkout">2. Checkout</a></h3>
            <h3 class="title title-simple title-step"><a href="#">3. Order Complete</a></h3>
        </div>
        <div class="container mt-8 mb-4">
            <div class="row gutter-lg">
                <div class="col-lg-8 col-md-12">
                    <table class="shop-table cart-table mt-2">
                        <thead>
                        <tr>
                            <th><span>Product</span></th>
                            <th></th>
                            <th><span>Price</span></th>
                            <th><span>quantity</span></th>
                            <th>Subtotal</th>
                        </tr>
                        </thead>
                        <tbody id='tbody'>
                        {#									<tr>#}
                        {#										<td class="product-thumbnail">#}
                        {#											<figure>#}
                        {#												<a href="product-simple.html">#}
                        {#													<img src="images/products/product15.jpg" width="100" height="100"#}
                        {#													alt="product">#}
                        {#												</a>#}
                        {#												<a href="#" class="product-remove" title="Remove this product">#}
                        {#													<i class="fas fa-times"></i>#}
                        {#												</a>#}
                        {#											</figure>#}
                        {#										</td>#}
                        {#										<td class="product-name">#}
                        {#											<div class="product-name-section">#}
                        {#												<a href="product-simple.html">Solid pattern in fashion summer dress</a>#}
                        {#											</div>#}
                        {#										</td>#}
                        {#										<td class="product-subtotal">#}
                        {#											<span class="amount">$129.99</span>#}
                        {#										</td>#}
                        {#										<td class="product-quantity">#}
                        {#											<div class="input-group">#}
                        {#												<button class="quantity-minus d-icon-minus"></button>#}
                        {#												<input class="quantity form-control" type="number" min="1"#}
                        {#													max="1000000">#}
                        {#												<button class="quantity-plus d-icon-plus"></button>#}
                        {#											</div>#}
                        {#										</td>#}
                        {#										<td class="product-price">#}
                        {#											<span class="amount">$129.99</span>#}
                        {#										</td>#}
                        {#									</tr>#}
                        {#									<tr>#}
                        {#										<td class="product-thumbnail">#}
                        {#											<figure>#}
                        {#												<a href="product-simple.html">#}
                        {#													<img src="images/products/product16.jpg" width="100" height="100"#}
                        {#													alt="product">#}
                        {#												</a>#}
                        {#												<a href="#" class="product-remove" title="Remove this product">#}
                        {#													<i class="fas fa-times"></i>#}
                        {#												</a>#}
                        {#											</figure>#}
                        {#									#}
                        {#										</td>#}
                        {#										<td class="product-name">#}
                        {#											<div class="product-name-section">#}
                        {#												<a href="product-simple.html">Mackintosh Poket backpack</a>#}
                        {#											</div>#}
                        {#										</td>#}
                        {#										<td class="product-subtotal">#}
                        {#											<span class="amount">$98.00</span>#}
                        {#										</td>#}
                        {#										<td class="product-quantity">#}
                        {#											<div class="input-group">#}
                        {#												<button class="quantity-minus d-icon-minus"></button>#}
                        {#												<input class="quantity form-control" type="number" min="1"#}
                        {#													max="1000000">#}
                        {#												<button class="quantity-plus d-icon-plus"></button>#}
                        {#											</div>#}
                        {#										</td>#}
                        {#										<td class="product-price">#}
                        {#											<span class="amount">$98.00</span>#}
                        {#										</td>#}
                        {#									</tr>#}
                        {#									<tr>#}
                        {#										<td class="product-thumbnail">#}
                        {#											<figure>#}
                        {#												<a href="product-simple.html">#}
                        {#													<img src="images/products/product17.jpg" width="100" height="100"#}
                        {#													alt="product">#}
                        {#												</a>#}
                        {#												<a href="#" class="product-remove" title="Remove this product">#}
                        {#													<i class="fas fa-times"></i>#}
                        {#												</a>#}
                        {#											</figure>#}
                        {#										</td>#}
                        {#										<td class="product-name">#}
                        {#											<div class="product-name-section">#}
                        {#												<a href="product-simple.html">Fashionable Overnight Bag</a>#}
                        {#											</div>#}
                        {#										</td>#}
                        {#										<td class="product-subtotal">#}
                        {#											<span class="amount">$199.00</span>#}
                        {#										</td>#}
                        {#										<td class="product-quantity">#}
                        {#											<div class="input-group">#}
                        {#												<button class="quantity-minus d-icon-minus"></button>#}
                        {#												<input class="quantity form-control" type="number" min="1"#}
                        {#													max="1000000">#}
                        {#												<button class="quantity-plus d-icon-plus"></button>#}
                        {#											</div>#}
                        {#										</td>#}
                        {#										<td class="product-price">#}
                        {#											<span class="amount">$199.00</span>#}
                        {#										</td>#}
                        {#									</tr>#}
                        </tbody>

                    </table>
                    <div id="msg"></div>
                    <div class="cart-actions mb-6 pt-6">
                        <div class="coupon">
                            <input type="text" name="coupon_code" class="input-text form-control" id="coupon_code"
                                   value="" placeholder="Coupon code">
                            <button type="submit" class="btn btn-md">Apply Coupon</button>
                        </div>
                        <button type="submit" class="btn btn-md btn-icon-left"><i
                                class="d-icon-refresh"></i>Update Cart
                        </button>
                    </div>
                </div>
                <aside class="col-lg-4 sticky-sidebar-wrapper">
                    <div class="sticky-sidebar" data-sticky-options="{'bottom': 20}">
                        <div class="summary mb-4">
                            <h3 class="summary-title text-left">Cart Totals</h3>
                            <table class="shipping">
                                <tr class="summary-subtotal">
                                    <td>
                                        <h4 class="summary-subtitle">Subtotal</h4>
                                    </td>
                                    <td>
                                        <p class="summary-subtotal-price" id="grand_total"></p>
                                    </td>
                                </tr>

                            </table>
                            <a href="#" class="btn btn-md">Update totals</a>
                        </div>
                        <table>
                            <tr class="summary-subtotal">
                                <td>
                                    <h4 class="summary-subtitle">Total</h4>
                                </td>
                                <td>
                                    <p class="summary-total-price" id="grand_total1"></p>
                                </td>
                            </tr>
                        </table>
                            <a href="checkout" class="btn btn-dark btn-checkout">Proceed to checkout</a>
                    </div>
                </aside>
            </div>
        </div>
    </div>
</main>
<!-- End Main -->
{% include 'footer.html' %}
<!-- End MobileMenu -->
<!-- Plugins JS File -->
<script>
    {#function go() {#}
    {#    alert()#}


    function createTable(output) {
        var data = ""

        for (var i = 0; i < output.length; i++) {
            data += `
                    <tr class="h5">
                    <td><img src="../static/${output[i]['photo']}" style="height:100px;width: 90px" "></td>
                    <td>${output[i]['name']}</td>
                    <td>$ ${output[i]['discount']}</td>
                    <td><a style="color: black" onclick="inc_dec(${output[i]['id']},0)"><i class="fas fa-minus-circle fa-lg mr-2"></i></a><input class="text-center" type="text" readonly value="${output[i]['quantity']}" style="width: 40px"><a style="color: black" onclick="inc_dec(${output[i]['id']},1)"><i class="fas fa-plus-circle fa-lg ml-2"></i></a></td>
                    <td>$ ${output[i]['total']}</td>
                    <td><a onclick="del(${output[i]['id']})" <i class="fas fa-ban fa-lg"></i></td>
                    </tr>
                    `
        }
        document.getElementById('tbody').innerHTML = data;
    }

    function inc_dec(id, s) {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                var output = this.response;
                {#console.log(output)#}
                if (output == 'success') {
                    getTable();
                }
            }
        };
        xhttp.open("GET", "increment?id=" + id + "&st=" + s, true);
        xhttp.send();
    }

    function del(id) {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                var output = this.response;
                {#console.log(output)#}
                if (output == 'success') {
                    getTable();
                }
            }
        };
        xhttp.open("GET", "deletecart?id=" + id, true);
        xhttp.send();
    }

    {#$(document).ready(function (){#}
    {#    getTable();#}
    {##}

</script>
<script>
    getTable();
</script>
<script src="{% static 'js/jquery.min.js' %}"></script>
<script src="{% static 'js/popper.min.js' %}"></script>
{#    <script src="{% static 'js/bootstrap.js ' %}"></script>#}
{#	<script src="{% static 'templatecss/vendor/jquery/jquery.min.js' %}"></script>#}
<script src="{% static 'templatecss/vendor/elevatezoom/jquery.elevatezoom.min.js' %}"></script>
<script src="{% static 'templatecss/vendor/imagesloaded/imagesloaded.pkgd.min.js' %}"></script>
<script src="{% static 'templatecss/vendor/magnific-popup/jquery.magnific-popup.min.js' %}"></script>
<!-- Main JS File -->
<script src="{% static 'templatecss/js/main.js' %}"></script>
{#<script>#}
{#    WebFontConfig = {#}
{#        google: {families: ['Open+Sans:400,600,700', 'Poppins:400,500,600,700']}#}
{#    };#}
{#    (function (d) {#}
{#        var wf = d.createElement('script'), s = d.scripts[0];#}
{#        wf.src = 'js/webfont.js';#}
{#        wf.async = true;#}
{#        s.parentNode.insertBefore(wf, s);#}
{#    })(document);#}
{#</script>#}

</body>

</html>